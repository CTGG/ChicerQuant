var app=angular.module("myAllStockApp",[]);app.controller("AllStockTableCtrl",function(a,e){a.url="http://115.159.97.98/php/serviceController.php";var d=new Array();var c=0;var b=[];e.post(a.url,{method:"getAllStocksService"}).success(function(h){a.error=false;a.data=h;a.allStocks=h;for(var g in a.allStocks){c++}for(var g in a.allStocks){if(g<c-1){d[g]=new Array;d[g][0]=a.allStocks[g].stock_id;d[g][1]=a.allStocks[g].stock_name;d[g][2]=a.allStocks[g].open;d[g][3]=a.allStocks[g].high;d[g][4]=a.allStocks[g].low;d[g][5]=a.allStocks[g].close;d[g][6]=a.allStocks[g].volumn;d[g][7]=a.allStocks[g].adj_price;d[g][8]=a.allStocks[g].pe_ttm;d[g][9]=a.allStocks[g].pb}}var f=d;$(document).ready(function(){var i=[];$("#table").DataTable({rowCallback:function(k,j){if($.inArray(j.DT_RowId,i)!==-1){$(k).addClass("selected")}},data:f,columns:[{title:"股票代码"},{title:"股票简称"},{title:"开盘价"},{title:"最高价"},{title:"最低价"},{title:"收盘价"},{title:"成交量"},{title:"后复权价"},{title:"市盈率"},{title:"市净率"}]});$("#table tbody").on("dblclick","tr",function(){console.log("doubleClick");var m=this.id;var j=$.inArray(m,i);var l=$(this).index();var k=$(this).eq(0)[0].firstChild.textContent;allStock2SingleStockPage(k);$(this).toggleClass("selected")});$("#table tbody").on("click","tr",function(){console.log("singleClick");var l=this.id;var j=$.inArray(l,i);var k=$(this).index();SingleClick(k);$(this).toggleClass("selected")})})}).error(function(f){a.error=true;a.data=f||"Request failed"})});